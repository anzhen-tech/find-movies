# Find Movies

## 项目简介

这是一个用于抓取电影天堂网站电影信息的爬虫程序，支持获取电影标题、详情页链接和下载链接，并将数据保存为CSV格式。

## 功能特点

- 自动抓取电影天堂网站的电影信息
- 支持获取电影标题、详情页链接和下载链接
- 数据以CSV格式保存，方便后续处理和分析
- 内置失败重试机制，确保数据完整性
- 支持多个电影分类，包括最新电影、动漫、综艺、电视剧等
- 自动处理中文编码，支持GB2312和UTF-8
- 智能识别多种下载链接格式（磁力链接、FTP、HTTP）
- 支持断点续传，不会重复爬取已存在的记录

## 安装说明

1. 克隆项目到本地
2. 安装依赖包：
```bash
npm install
```

## 依赖说明

- axios: HTTP客户端，用于发送网络请求
- cheerio: HTML解析器，用于提取网页内容
- iconv-lite: 编码转换工具，用于处理中文编码

## 使用方法

1. 启动爬虫：
```bash
npm start
```

2. 修复空记录：
```bash
node fix_empty_records.js
```

## 数据格式

### movies.csv
包含以下字段：
- Title: 电影标题
- DetailUrl: 详情页链接
- DownloadLink: 下载链接

### failed.csv
记录爬取失败的条目，包含以下字段：
- Title: 电影标题（可能为空）
- DetailUrl: 详情页链接

## 使用注意事项

1. 请合理控制爬取频率，避免对目标网站造成过大压力
2. 程序会自动处理编码问题，无需手动设置
3. 失败的记录会自动保存，可以稍后重试
4. 支持断点续传，不会重复爬取已存在的记录
5. 建议定期备份已爬取的数据文件

## 错误处理

1. 如果遇到网络错误，程序会自动重试
2. 对于无法获取下载链接的页面，会记录到failed.csv中
3. 可以使用fix_empty_records.js脚本修复空记录